---
# バックエンドイメージビルド専用プレイブック
# バックエンドのコンテナイメージ（ベースイメージ）のみをビルドします
# 注意: アプリケーション実装コードはコンテナイメージには含めず、ボリュームマウントで提供されます

- name: Build Backend Image
  hosts: "{{ target_hosts }}"
  become: "{{ ansible_become | mandatory('ansible_become must be set in inventory') }}"

  tasks:
    - name: Build backend container image
      ansible.builtin.include_role:
        name: docker
        tasks_from: build/backend
      tags:
        - docker
        - build-backend
