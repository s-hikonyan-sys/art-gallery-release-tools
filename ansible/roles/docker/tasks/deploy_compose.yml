---
# docker-compose.ymlのデプロイ
# 環境に応じたテンプレートを使用して生成します

- name: Deploy docker-compose.yml from template
  ansible.builtin.template:
    src: docker-compose.yml.j2
    dest: "{{ deployment_paths.deployment_dir }}/docker-compose.yml"
    owner: "{{ app_user | mandatory('app_user must be set in inventory') }}"
    group: "{{ app_user | mandatory('app_user must be set in inventory') }}"
    mode: '0600'
  tags:
    - docker
    - deploy-compose
    - deploy-all