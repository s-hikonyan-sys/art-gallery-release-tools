---
# Secrets APIイメージビルド専用プレイブック
# Secrets APIのコンテナイメージ（ベースイメージ）のみをビルドします
# 注意: アプリケーション実装コードはコンテナイメージには含めず、ボリュームマウントで提供されます

- name: Build Secrets API Image
  hosts: "{{ target_hosts }}"
  become: "{{ ansible_become | mandatory('ansible_become must be set in inventory') }}"

  tasks:
    - name: Build secrets-api container image
      ansible.builtin.include_role:
        name: docker
        tasks_from: build/secrets
      tags:
        - docker
        - build-secrets
